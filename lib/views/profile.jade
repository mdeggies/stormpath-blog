extends ./layout.jade

block vars
  - var title = 'Profile'

block content

  script(src="/static/js/blogActions.js" type='text/javascript')

  - var name = user.fullName || user.username
  
  .spacing
  
  form.post-form.form-horizontal(method='post' action='/bloggers/'+user.username+'/profile')
    h2(class='title') Let's get blogging, #{name}!
    hr
    .spacing
    .form-group
      label.col-lg-2.control-label(for='Title') Title
      .col-lg-10
        input#title.form-control(type='text', name='title', required=true)
    - if (admin)
      .form-group
        label.col-lg-2.control-label(for='author') Author's Username
        .col-lg-10
          input#author.form-control(type='text', name='author')
    .form-group
      label.col-lg-2.control-label(for='content') Content
      .col-lg-10
        textarea#content.form-control(type='text', rows='5', name='content', required=true)
    .form-group
      label.col-lg-2.control-label(for='tags') Tags
      .col-lg-10
        input#tags.form-control(type='text', required=true, data-role='tagsinput', <='', body='', name='tags')
    .form-group
      .col-lg-10.col-lg-offset-2
        button.btn.btn-default(type='reset', name='reset') Cancel
        button.btn.btn-primary(type='submit', name='submit') Post
     
  if !blogPosts || blogPosts.length === 0
    h2(class='err2') Looks like you don't have any posts! Create one above :)
  else
    h2(class='err2') My Posts
      hr
      
    .spacing
    
    table.table.table-striped.table-hover#table
      thead
        tr
          th 
            i.fa.fa-minus-square(class='icon')
          th Title
          th Date
      tbody
        each post, index in blogPosts
          tr
            td 
              input(type="checkbox", name="agree" onClick="deletePost('#{user.username}', #{index})")
            td 
              a(href='/bloggers/#{user.username}/#{index}') #{post.title}
            td #{post.date}
            
  .spacing
  
  a(href='/bloggers/#{user.username}/delete/account')
    h4(class='center') Delete Account

  .spacing
